type Vault @entity {
  "address of the vault"
  id: ID!
  "block and timestamp on which the vault was registered at the controller"
  reg_block: BigInt!
  reg_timestamp: BigInt!
  "current strategy"
  curr_strategy: Strategy!
  "all strategies"
  strategies: [Strategy!]! @derivedFrom(field: "vault")
  "token locked up in vault"
  underlying: Token!
  "returned share token"
  f_token: Token!
  "hard work done on vault"
  do_hard_works: [DoHardWork!]! @derivedFrom(field: "vault")
  withdrawals: [Withdrawal!]! @derivedFrom(field: "vault")
  deposits: [Deposit!]! @derivedFrom(field: "vault")
}

type Strategy @entity {
  "Strategy address"
  id: ID!
  "block and timestamp on which the strategy was registered on the vault"
  reg_block: BigInt!
  reg_timestamp: BigInt!
  "vault it belongs to"
  vault: Vault!
  "Hard work done by strategy"
  do_hard_works: [DoHardWork!]! @derivedFrom(field: "strategy")
}

type DoHardWork @entity {
  "Transaction hash"
  id: ID!
  block: BigInt!
  timestamp: BigInt!
  "vault hard work was done on"
  vault: Vault!
  "strategy that was used for hardwork"
  strategy: Strategy!
  "share price before doHardWork call"
  old_share_price: BigInt!
  "share price after doHardWork call"
  new_share_price: BigInt!
}

type User @entity{
  "address of user account"
  id: ID!
  withdrawals: [Withdrawal!]! @derivedFrom(field: "user")
  deposits: [Deposit!]! @derivedFrom(field: "user")
}

type Withdrawal implements ETH @entity {
  id: ID!
  timestamp: BigInt!
  vault: Vault!
  user: User!
  amount: BigInt!
}

type Deposit implements ETH @entity {
  id: ID!
  vault: Vault!
  user: User!
  amount: BigInt!
}

type Token @entity {
  "token address"
  id: ID!
  name: String!
  symbol: String!
  decimals: Int!
}

type Block @entity {
  id: ID!
  hash: Bytes!
  parent_hash: Bytes!
  uncles_hash: Bytes!
  author: Bytes!
  state_root: Bytes!
  transactions_root: Bytes!
  receipts_root: Bytes!
  number: BigInt!
  gas_used: BigInt!
  gas_limit: BigInt!
  timestamp: BigInt!
  difficulty: BigInt!
  total_difficulty: BigInt!
  size: BigInt
}

type Transaction @entity {
  id: ID!
  hash: Bytes!
  index: BigInt!
  from: Bytes!
  to: Bytes
  value: BigInt!
  gas_used: BigInt!
  gas_price: BigInt!
  input: Bytes!
}

interface ETH {
  timestamp: BigInt!
  block: Block!
  transaction: Transaction!
}
